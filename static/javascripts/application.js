// Generated by CoffeeScript 1.4.0
(function() {

  window.log = function() {
    var _ref;
    return (_ref = this.console) != null ? typeof _ref.log === "function" ? _ref.log.apply(_ref, arguments) : void 0 : void 0;
  };

  $(function() {
    var $alertError;
    $alertError = $("#alert-error");
    $alertError.find(".close").click(function() {
      return $alertError.fadeOut();
    });
    if (localStorage["aws-key"] && localStorage["aws-secret"]) {
      $("#aws-key").val(localStorage["aws-key"]);
      $("#aws-secret").val(localStorage["aws-secret"]);
    }
    return $("#create-bucket").submit(function(e) {
      var $btn, $form;
      e.preventDefault();
      $form = $(this);
      $btn = $form.find("input[type=submit]");
      $alertError.hide();
      $btn.button('loading');
      return $form.ajaxSubmit(function(response) {
        var b;
        $btn.button('reset');
        if (response.status) {
          b = response.bucket;
          $("#new-bucket-url").text(b.bucket_url);
          $("#new-bucket-name").text(b.bucket_name);
          $("#new-aws-key").text(b.aws_key);
          $("#new-aws-secret").text(b.aws_secret);
          $("#new-user-name").text(b.user_name);
          $('#success-modal').modal();
        } else {
          $alertError.fadeIn().find('.alert-message').text(response.message);
        }
        if ($("#save-creds:checked").length && response.status) {
          localStorage["aws-key"] = $("#aws-key").val();
          return localStorage["aws-secret"] = $("#aws-secret").val();
        } else if (!$("#save-creds:checked").length) {
          localStorage.removeItem("aws-key");
          return localStorage.removeItem("aws-secret");
        }
      });
    });
  });

}).call(this);
